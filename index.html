
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>
      
        Blog - 
      
      Chouqin & Laoqi
    </title>
    
    <meta name="author" content="Qiping Li">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->


    <script src="/assets/themes/hooligan/js/jquery.min.js"></script>
    <script src="/assets/themes/hooligan/bootstrap/js/bootstrap.min.js"></script>

    <link href="/assets/themes/hooligan/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/hooligan/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet">    
    <link rel="stylesheet" type="text/css" href="/assets/themes/hooligan/css-social-buttons/css/zocial.stripped.css" />
    <link href="/assets/themes/hooligan/css/pygments.css" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/hooligan/css/darkstrap.css" rel="stylesheet" type="text/css" media="all">    
    <link href="/assets/themes/hooligan/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    
    <!-- fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>      


          <a class="brand" href="/">Chouqin & Laoqi</a>


          <div class="nav-collapse">
            <ul class="nav">
              
              
              


  
    
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/about.html">About Me</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  



            </ul>
            <ul class="nav pull-right social visible-desktop">
              <li class="divider-vertical"></li>
              
                <li>
                  <a href="https://www.github.com/chouqin" class="zocial github icon" target="_blank">
                    <span class="hidden-desktop">Github</a>
                  </a>
                </li>
              
                  
                                        
                         
                                  
              
              
                <li>
                  <a href="http://www.weibo.com/" class="zocial weibo icon" target="_blank">
                    <span class="hidden-desktop">Weibo</a>
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="content">
        <div class="row">
    <div class="span8" style="margin-top:20px;">
      <!--[> iterate through the posts on this page <]-->
      
        <div class="post">
          <h1><a href="/python/2012/11/11/chinese-encoding">浅谈中文编码</a></h1>
          <p class="meta">November 11, 2012</p>
            <p>作为一个天朝的程序员，总是会在编程的时候与中文打交道。一开始对于编码不是很熟悉，也没有弄明白它里面的原理，
在处理中文的时候总是会遇到各种各样的问题，特别是在用python处理中文的时候，
所以特地花时间研究了一下中文编码，并通过python来熟悉一些概念。</p>

<p>废话不多说，先上干货，<a href="http://www.searchtb.com/2012/04/chinese_encode.html">中文编码杂谈</a>，
这篇文章是淘宝搜索技术团队写的，深入浅出，基本上将中文编码的各个方面讲得十分细致，而且十分通俗易懂。
我很难讲得比这篇文章更好了，我主要从几个侧面来阐述一下我对于中文编码的理解。</p>

<h2>中文编码是什么</h2>

<p>中文编码其实就是将中文转化为二进制比特串的过程，而不同的编码方式会把同一个中文字符转化为不同的二进制表示，
比如“中”这个字，通过utf-8编码会转化为二进制E4B8AD，而在计算机中，所有的数据都是通过二进制保存，这样我们就可以
通过二进制E4B8AD来保存“中”字，然后我们如果需要读取保存的这个字，我们首先需要知道编码方式是utf-8，然后就能将
E4B8AD转化为“中”。</p>

<h2>python的中文处理</h2>

<p>python提供了对unicode很好的支持，同时也能将unicode转化为其他的各种编码。</p>

<p>下面通过代码来对解释一下pytho中的编码问题。</p>

<div class="highlight"><pre><code class="python">    <span class="o">&gt;&gt;&gt;</span><span class="n">a</span> <span class="o">=</span> <span class="s">&quot;我是123&quot;</span>
    <span class="o">&gt;&gt;&gt;</span><span class="n">a</span>
    <span class="s">&#39;</span><span class="se">\xe6\x88\x91\xe6\x98\xaf</span><span class="s">123&#39;</span>
    <span class="o">&gt;&gt;&gt;</span><span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="nb">str</span>
    <span class="o">&gt;&gt;&gt;</span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="mi">9</span>
</code></pre>
</div>


<p>从上面的代码可以看到，python把"我是123"这个字符串当成是str类型，其实只是把这个字符串的编码
二进制当成中文来处理。当我们通过输入法输入"我是123"时，输入法会根据我们系统的LACALE值将"我是123"
编码成相应的二进制，而python遇到二进制值时的处理也是要根据系统的编码方式，如果是一个python的脚本，
我们可以通过再脚本的头部通过</p>

<pre><code>`# -*- coding:utf-8 -*- `
</code></pre>

<p>设置python处理编码的方式。</p>

<p>同时可以看到"我是123"这个字符串的长度是9，这是因为字符串a在utf8编码时的二进制表示为<code>'\xe6\x88\x91\xe6\x98\xaf\x21\x22\x23'</code>,
一共占了9个字节，python的len()函数对于字符串就是计算它占了多少个byte,所以:len(a) = 9。</p>

<p>下面看如何与unicode进行相互转化:(此时采用的编码是utf8，其他的编码也是一样的处理):</p>

<div class="highlight"><pre><code class="python">    <span class="o">&gt;&gt;&gt;</span><span class="n">ua</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">)</span>
    <span class="o">&gt;&gt;&gt;</span><span class="n">ua</span>
    <span class="s">u&#39;</span><span class="se">\u6211\u662f</span><span class="s">123&#39;</span>
    <span class="o">&gt;&gt;&gt;</span><span class="k">print</span> <span class="n">ua</span>
    <span class="err">我是</span><span class="mi">123</span>
    <span class="o">&gt;&gt;&gt;</span><span class="nb">type</span><span class="p">(</span><span class="n">ua</span><span class="p">)</span>
    <span class="nb">unicode</span>
    <span class="o">&gt;&gt;&gt;</span><span class="nb">len</span><span class="p">(</span><span class="n">ua</span><span class="p">)</span>
    <span class="mi">5</span>
    <span class="o">&gt;&gt;&gt;</span><span class="n">b</span> <span class="o">=</span> <span class="n">ua</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&quot;utf-8&quot;</span><span class="p">)</span>
    <span class="o">&gt;&gt;&gt;</span><span class="n">b</span>
    <span class="s">&#39;</span><span class="se">\xe6\x88\x91\xe6\x98\xaf</span><span class="s">123&#39;</span>
</code></pre>
</div>


<p>将字符串转换为unicode通过decode()函数，反过来通过encode()函数。同时也可以通过：</p>

<div class="highlight"><pre><code class="python">    <span class="n">ua</span> <span class="o">=</span> <span class="nb">unicode</span><span class="p">(</span><span class="s">&quot;我是123&quot;</span><span class="p">,</span> <span class="s">&quot;utf-8&quot;</span><span class="p">)</span>
</code></pre>
</div>


<p>或者是</p>

<div class="highlight"><pre><code class="python">    <span class="n">ua</span> <span class="o">=</span> <span class="s">u&quot;我是123&quot;</span>
</code></pre>
</div>


<p>得到同样的unicode。可以看到ua的长度为5，因为在unicode中不管是汉字还是字母或者是数字，
都当作同样的字符来进行处理，这样一个unicode的长度就是所有字符的个数，而不管这些字符是中文
汉字还是英文字符。这样的好处就在于能够很好地定位到一个具体的字符，字符串的截取以及正则表达式
匹配等操作都十分方便。所以推荐在处理包含中文的字符串时，先把这个字符串转化为unicode，然后再
进行操作，操作完以后再encode成字符串。</p>

<p>关于中文编码就很浅显地谈到这里，希望能给大家带来帮助，有什么问题可以在留言中和我讨论。</p>

        </div>
      
        <div class="post">
          <h1><a href="/Feelings/2012/10/27/feeling">最近的总结与感悟</a></h1>
          <p class="meta">October 27, 2012</p>
            

<h2>来由</h2>

<p>这段时间真的很忙，忙得都没时间好好看书，好好写博客。</p>

<p>每天都要上班，还要忙着保研的各种事情，有时还在保研和直接工作中纠结，
导致一有一点空闲时间，就什么事情也没想干了。</p>

<p>还好，现在这些事情也终于告一段落，也不用再去纠结什么了，终于可以静下心来
去做自己喜欢做的事，踏踏实实地学习某些东西了。</p>

<p>但是总结一番还是有点必要的，不然这些日子的纠结不是白费了吗。</p>

<p class='more'><a href='/Feelings/2012/10/27/feeling'>More...</a></p>
        </div>
      

      <!--[> links to prev and next pages for browsing thru archives <]-->
      
      
        <span id="older"><a href="/page2">Older Entries &raquo;&raquo;</a></span>
      

    </div>

    <div class="span4" style="margin-top:20px;">
        <h3>所有分类</h3>
        <ul class="categories">
            
            


  
     
    	<li><a href="/categories.html#lessons-ref">
    		lessons <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#linux-ref">
    		linux <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#python-ref">
    		python <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#Feelings-ref">
    		Feelings <span>1</span>
    	</a></li>
    
  


        </ul>
        <!-- -->
          <!--<h2 id="lessons-ref">lessons</h2>-->
          <!--<ul>-->
            <!--  -->
            <!--


  
    
      
      	
      	<li><a href="/lessons/2011/12/29/jekyll-introduction">Jekyll Introduction</a></li>
      	
      
    
  


-->
          <!--</ul>-->
        <!-- -->
          <!--<h2 id="linux-ref">linux</h2>-->
          <!--<ul>-->
            <!--  -->
            <!--


  
    
      
      	
      	<li><a href="/linux/2012/09/14/archlinux-installation">ArchLinux 安装经过</a></li>
      	
      
    
  


-->
          <!--</ul>-->
        <!-- -->
          <!--<h2 id="python-ref">python</h2>-->
          <!--<ul>-->
            <!--  -->
            <!--


  
    
      
      	
      	<li><a href="/python/2012/11/11/chinese-encoding">浅谈中文编码</a></li>
      	
      
    
  


-->
          <!--</ul>-->
        <!-- -->
          <!--<h2 id="Feelings-ref">Feelings</h2>-->
          <!--<ul>-->
            <!--  -->
            <!--


  
    
      
      	
      	<li><a href="/Feelings/2012/10/27/feeling">最近的总结与感悟</a></li>
      	
      
    
  


-->
          <!--</ul>-->
        <!---->
    </div>
</div>


      </div>

      <footer>
        <p>&copy; Qiping Li 2012 
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://github.com/dhulihan/hooligan" target="_blank">The Hooligan Theme</a>
        </p>
      </footer>
    </div> <!-- /container -->
    
  </body>
</html>

